<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_21) on Mon May 06 14:38:38 EDT 2013 -->
<title>WriteAheadLog</title>
<meta name="date" content="2013-05-06">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="WriteAheadLog";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/ornl/keva/node/SSTableService.html" title="class in gov.ornl.keva.node"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/ornl/keva/node/WriteAheadLog.Flush.html" title="enum in gov.ornl.keva.node"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/ornl/keva/node/WriteAheadLog.html" target="_top">Frames</a></li>
<li><a href="WriteAheadLog.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.ornl.keva.node</div>
<h2 title="Class WriteAheadLog" class="title">Class WriteAheadLog</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gov.ornl.keva.node.WriteAheadLog</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">WriteAheadLog</span>
extends java.lang.Object</pre>
<div class="block">The write ahead log persists all "put" operations (the key and value) onto
 disk sequentially. The log is used to ensure that all values are safely persisted
 since memtables only store the values in memory (and hence may become lost if the
 machine is rebooted). Our WAL implementation has different flushing policies depending
 on the safety guarantees the user expects.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>James Horey</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.Flush.html" title="enum in gov.ornl.keva.node">WriteAheadLog.Flush</a></strong></code>
<div class="block">Flushing policies.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#WriteAheadLog(gov.ornl.keva.node.KevaDB, java.lang.String)">WriteAheadLog</a></strong>(<a href="../../../../gov/ornl/keva/node/KevaDB.html" title="class in gov.ornl.keva.node">KevaDB</a>&nbsp;db,
             java.lang.String&nbsp;configFile)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#clear()">clear</a></strong>()</code>
<div class="block">Clear the entire WAL history.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#createLog()">createLog</a></strong>()</code>
<div class="block">Start the logging system.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../gov/ornl/keva/node/WriteAheadLog.Flush.html" title="enum in gov.ornl.keva.node">WriteAheadLog.Flush</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#getPolicy()">getPolicy</a></strong>()</code>
<div class="block">Get the flushing policy.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#getPolicyParam()">getPolicyParam</a></strong>()</code>
<div class="block">Get the flushing policy parameter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#put(gov.ornl.keva.table.TableKey, gov.ornl.keva.table.TableValue, gov.ornl.keva.core.WriteOptions)">put</a></strong>(<a href="../../../../gov/ornl/keva/table/TableKey.html" title="class in gov.ornl.keva.table">TableKey</a>&nbsp;key,
   <a href="../../../../gov/ornl/keva/table/TableValue.html" title="class in gov.ornl.keva.table">TableValue</a>&nbsp;value,
   <a href="../../../../gov/ornl/keva/core/WriteOptions.html" title="class in gov.ornl.keva.core">WriteOptions</a>&nbsp;options)</code>
<div class="block">Log a put operation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#put(gov.ornl.keva.node.WriteBatch)">put</a></strong>(<a href="../../../../gov/ornl/keva/node/WriteBatch.html" title="class in gov.ornl.keva.node">WriteBatch</a>&nbsp;ops)</code>
<div class="block">Log a series of writes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#recycle(long)">recycle</a></strong>(long&nbsp;time)</code>
<div class="block">Delete older logs from disk.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#replay()">replay</a></strong>()</code>
<div class="block">Replay this log.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#setPolicy(gov.ornl.keva.node.WriteAheadLog.Flush)">setPolicy</a></strong>(<a href="../../../../gov/ornl/keva/node/WriteAheadLog.Flush.html" title="enum in gov.ornl.keva.node">WriteAheadLog.Flush</a>&nbsp;policy)</code>
<div class="block">Set the flushing policy.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/ornl/keva/node/WriteAheadLog.html#setPolicyParam(long)">setPolicyParam</a></strong>(long&nbsp;param)</code>
<div class="block">The size and time-based flushing policies require an additional
 parameter to control when to flush.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="WriteAheadLog(gov.ornl.keva.node.KevaDB, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>WriteAheadLog</h4>
<pre>public&nbsp;WriteAheadLog(<a href="../../../../gov/ornl/keva/node/KevaDB.html" title="class in gov.ornl.keva.node">KevaDB</a>&nbsp;db,
             java.lang.String&nbsp;configFile)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - The database to associate with this log</dd><dd><code>configFile</code> - Path to the configuration file</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLog</h4>
<pre>public&nbsp;void&nbsp;createLog()</pre>
<div class="block">Start the logging system. We must define a new
 log to store everything.</div>
</li>
</ul>
<a name="setPolicy(gov.ornl.keva.node.WriteAheadLog.Flush)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPolicy</h4>
<pre>public&nbsp;void&nbsp;setPolicy(<a href="../../../../gov/ornl/keva/node/WriteAheadLog.Flush.html" title="enum in gov.ornl.keva.node">WriteAheadLog.Flush</a>&nbsp;policy)</pre>
<div class="block">Set the flushing policy. 
 FLUSH_IMMEDIATE will flush all values to disk immediately 
 (equivalent to an OS synch operatiation). FLUSH_TIME will
 only flush values after a certain period of time has passed. 
 FLUSH_SIZE will only flush values after the in-memory buffer 
 grows too large.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>policy</code> - The flushing policy</dd></dl>
</li>
</ul>
<a name="getPolicy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPolicy</h4>
<pre>public&nbsp;<a href="../../../../gov/ornl/keva/node/WriteAheadLog.Flush.html" title="enum in gov.ornl.keva.node">WriteAheadLog.Flush</a>&nbsp;getPolicy()</pre>
<div class="block">Get the flushing policy.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The flushing policy</dd></dl>
</li>
</ul>
<a name="setPolicyParam(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPolicyParam</h4>
<pre>public&nbsp;void&nbsp;setPolicyParam(long&nbsp;param)</pre>
<div class="block">The size and time-based flushing policies require an additional
 parameter to control when to flush.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>param</code> - The flushing policy parameter</dd></dl>
</li>
</ul>
<a name="getPolicyParam()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPolicyParam</h4>
<pre>public&nbsp;long&nbsp;getPolicyParam()</pre>
<div class="block">Get the flushing policy parameter.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The flushing policy parameter</dd></dl>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
<div class="block">Clear the entire WAL history.</div>
</li>
</ul>
<a name="recycle(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recycle</h4>
<pre>public&nbsp;void&nbsp;recycle(long&nbsp;time)</pre>
<div class="block">Delete older logs from disk.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>time</code> - The minimum age of the logs.</dd></dl>
</li>
</ul>
<a name="put(gov.ornl.keva.node.WriteBatch)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre>public&nbsp;void&nbsp;put(<a href="../../../../gov/ornl/keva/node/WriteBatch.html" title="class in gov.ornl.keva.node">WriteBatch</a>&nbsp;ops)</pre>
<div class="block">Log a series of writes. These writes are committed "atomically".
 Since all writes in the log are serialized, we just need to make
 sure that all these writes are contiguous.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ops</code> - Set of write operations</dd></dl>
</li>
</ul>
<a name="put(gov.ornl.keva.table.TableKey, gov.ornl.keva.table.TableValue, gov.ornl.keva.core.WriteOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre>public&nbsp;void&nbsp;put(<a href="../../../../gov/ornl/keva/table/TableKey.html" title="class in gov.ornl.keva.table">TableKey</a>&nbsp;key,
       <a href="../../../../gov/ornl/keva/table/TableValue.html" title="class in gov.ornl.keva.table">TableValue</a>&nbsp;value,
       <a href="../../../../gov/ornl/keva/core/WriteOptions.html" title="class in gov.ornl.keva.core">WriteOptions</a>&nbsp;options)</pre>
<div class="block">Log a put operation.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key of the value.</dd><dd><code>value</code> - The value to place into the database.</dd><dd><code>options</code> - Write options that define how the 
 value is written to the memtable.</dd></dl>
</li>
</ul>
<a name="replay()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>replay</h4>
<pre>public&nbsp;void&nbsp;replay()
            throws <a href="../../../../gov/ornl/keva/core/KevaDBException.html" title="class in gov.ornl.keva.core">KevaDBException</a></pre>
<div class="block">Replay this log.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../gov/ornl/keva/core/KevaDBException.html" title="class in gov.ornl.keva.core">KevaDBException</a></code> - is used to indicate any errors.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/ornl/keva/node/SSTableService.html" title="class in gov.ornl.keva.node"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/ornl/keva/node/WriteAheadLog.Flush.html" title="enum in gov.ornl.keva.node"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/ornl/keva/node/WriteAheadLog.html" target="_top">Frames</a></li>
<li><a href="WriteAheadLog.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
